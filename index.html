<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Git Rebase - Brian Kulyk</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">

<section>
	<h1>Hi</h1>
	<p class='fragment'>I'm Brian.</p>
	<p class='fragment'>Let's talk about...</p>
</section>

<section>
  <h1>git rebase</h1>
  <p class='fragment'>It's scary.</p>
  <p class='fragment'><img src='img/do-it.jpg' /></p>
</section>

<section>
	<h3>The Problem</h3>
	<p>hard to read history:</p>
	<ul>
		<li>Commits out of order</li>
		<li>Comments are worthless</li>
		<li>Merge commits are in the way and don't add anything</li>
		<li>Hard to see why code was introduced, makes debugging difficult</li>
	</ul>
</section>

<section>
	<h4>asdf, fix stuff, .</h4>
	<img src='img/messy-1.png' />
	<p class='fragment'>worthless messages</p>
	<p class='fragment'>why?</p>
</section>

<section>
	<h4>probably because</h4>
	<div class='fragment'>
		<img src='img/go-home.jpg' />
	</div>
</section>

<section>
	<h2>Let's look at some more quotes</h2>
	<p>(commit messages)</p>
</section>

<section>
	<h2>"Indentation"</h2>
	<div class='fragment'>
		<p>&mdash; Serj Shine</p>
		<p><img src='img/messy-3.png' /></p>
	</div>
</section>

<section>
	<h2>"mroe"</h2>
	<div class='fragment'>
		<p>&mdash; Lu Zou</p>
		<p><img src='img/messy-4.png' /></p>
	</div>
</section>

<section>
	<h2>"remove unused constant"</h2>
	<div class='fragment'>
		<p>&mdash; Shehan Perera</p>
		<p><img src='img/messy-5.png' /></p>
	</div>
</section>

<section>
	<h2>"attempt to fail Jenkins again"</h2>
	<div class='fragment'>
		<p>&mdash; Shaun Shapiro</p>
		<p><img src='img/messy-6.png' /></p>
	</div>
</section>

<section>
	<h2>"..."</h2>
	<div class='fragment'>
		<p>&mdash; Maria Zhao</p>
		<p><img src='img/messy-7.png' /></p>
	</div>
</section>

<section>
	<h2>"oops missed"</h2>
	<div class='fragment'>
		<p>&mdash; Ankit Gupta</p>
		<p><img src='img/messy-8.png' /></p>
	</div>
</section>

<section>
	<h2>"vcr"</h2>
	<p class='fragment'>&mdash; everyone</p>
</section>

<section>
	<h4>What Can We Do?</h4>
	<img class='fragment' src='img/putin-squash.jpg' />
</section>

<section>
	<h4>Let's Squash Some of These Messy Commits</h4>
	<img src='img/squash-history.png' />
</section>

<section>
	<p>Count number of items we are working with in `git log`, use this for the following command</p>
	<p>git rebase -i HEAD~4</p>
	<img src='img/squash-1.png' />
</section>

<section>
	<h4>squash</h4>
	keep the first 'pick' and change the rest of the ones we want to squash to 's' or 'squash'
	<img src='img/squash-2.png' />
	<p class='fragment'>[esq] :wq</p>
</section>

<section>
	<h4>Next you see a screen where you can a chance to correct your lazy messages</h4>
	<img src='img/squash-3.png' />
</section>

<section>
	<h4>Enter a decent commit message for the sqashed commit</h4>
	<img src='img/squash-4.png' />
	<p class='fragment'><small>[esq] :wq</small></p>
</section>

<section>
	<h4>try including the jira number :)</h4>
	<img src='img/jira.jpg' />
	<p class='fragment'><small>I just really want to include this image.</small></p>
</section>

<section>
	<h4>Updated commit history</h4>
	<small>git log</small>
	<img src='img/squash-done.png' />
</section>

<section>
	<img src='img/success.jpg' />
</section>

<section>
	<h4>Still kinda ugly though</h4>
	<p>now two comments about the same thing separated by other commits</p>
	<small>git log</small>
	<img src='img/reorder-intro.png' />
</section>

<section>
	<h4>Reorder Commits</h4>
	<p>`git rebase -i HEAD~4`</p>
	<img src='img/reorder-1.png' />
	<p class='fragment'><small>[esq] :wq</small></p>
</section>

<section>
	<h4>Commits reordered</h4>
	<img src='img/reorder-2.png' />
	<p class='fragment'><small>[esq] :wq</small></p>
	<div class='fragment'>
		<h4>Woot!!</h4>
		<img src='img/reorder-done.png' />
	</div>
</section>

<section>
	<img src='img/success-2.jpg' />
</section>

<section>
	<img src='img/more-squash.jpg' />
</section>

<section>
	<p>git rebase -i HEAD~2</p>
	<p>choose item(s) to be squashed</p>
	<img src='img/squashed-again.png'/>
	<p class='fragment'><small>[esq] :wq</small></p>
</section>

<section>
	<h4>Success!</h4>
	<img src='img/squashed-again-done.png'/>
</section>

<section>
	<img src='img/success-3.jpg' />
</section>

<section>
	<h4>But... how could we have prevented having to reorder the commits?</h4>
	<h5>'cause that part was hard :(</h5>
	<img src='img/sad-bear.jpg' />
</section>

<section>
	<h4>Don't `git merge development`</h4>
	<div class='fragment'>
		<p>instead:</p>
		<h4>Use `git pull --rebase origin development`</h4>

		<img src='img/rebaste.jpg' />
	</div>
</section>

<section>
	<p>what does this do?</p>
	<ul>
	  <li class='fragment'>rewinds the git playhead back</li>
	  <li class='fragment'>pulls the changes from remote branch</li>
	  <li class='fragment'>rewrites your changes at the end</li>
	  <li class='fragment'>makes happy</li>
	</ul>
</section>

<section>
	<h4>Let's try it</h4>
	<p>git log</p>
	<img src='img/pull-rebase-1.png' />
</section>

<section>
	<p>git pull --rebase origin development</p>
	<img src='img/pull-rebase-2.png' />
	<p>remove commits that are not in development, pull changes from development,
	reapply our commits at the end.</p>
</section>

<section>
	<h4>Updated git log</h4>
	<p>Looks like there were at ton of commits we forgot to reorder and squash</p>
	<img src='img/pull-rebase-3.png' />
</section>

<section>
	<p>`git rebase -i HEAD~20`</p>
	<img src='img/squash-last-time-1.png' />
	<p>select commits to squash</p>
	<p><small>[esq] :wq</small></p>
	<p>fix commit message</p>
	<p><small>[esq] :wq</small></p>
</section>

<section>
	<h4>Final Commit History</h4>
	<img src='img/squash-last-time-2.png' />
	<p>`git push -f origin bk-save-searches-modal`</p>
</section>

<section>
	<img src='img/amazing.jpg' />
</section>

<section>
	<p>
		You may have noticed that the last commit has the wrong author, that's because
		I squashed my commits into one of Maria's. Now she gets all the credit for my
		hard work.
	</p>
	<div class='fragment'>
		<img src='img/oh-wait.jpg' />
	</div>
</section>

<section>
	<h4>Amend Author</h4>
	<p>git commit --amend --author  "Brian Kulyk &lt;brian.kulyk@move.com&gt;"</p>
	<img src='img/amend.png'/>
</section>

<section>
	<h1>PR Merge Conflicts</h1>
	<p>When submitting my PR, I was warned about a merge conflict that needed to be
		dealt with manually.  We can use rebase to fix this too.</p>
</section>

<section>
	<p>git pull --rebase origin development</p>
	<p>conflict</p>
	<img src='img/conflict-1.png' />
</section>

<section>
	<p>`git status` to see conflicted files</p>
	<p>resolve the conflict manually</p>
	<p>`git add .`<br/>
			git rebase --continue`</p>
	<img src='img/conflict-2.png' />
</section>

<section>
	<h4>Done</h4>
	<img src='img/conflict-done.png' />
	<p>Notice there is no extra merge commit, which is good... 'cause those are gross.</p>
</section>

<section>
	<img src='img/awesome.jpg' />
</section>

<section>
	<h1>Remember</h1>
	<img src='img/--rebase.jpg' />
	<p>use `git pull --rebase`</p>
</section>

			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				history: true,

				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
